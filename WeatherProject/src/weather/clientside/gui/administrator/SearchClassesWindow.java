package weather.clientside.gui.administrator;

import weather.ApplicationControlSystem;
import weather.common.gui.component.BUDialog;

/**
 * The <code>SearchClassesWindow</code> provides a search function for
 * classes based on certain criteria.
 * @author Eric Lowrie
 * @version Spring 2012
 */
public class SearchClassesWindow extends BUDialog {
    private boolean isAdmin;
    private ManageClassesWindow parent;
    
    /**
     * Creates new form SearchClassesWindow.
     * @param app The ApplicationControlSystem.
     * @param isAdmin Tells whether or no this window is admin.
     * @param parent The form that called this window.
     */
    public SearchClassesWindow(ApplicationControlSystem app, boolean isAdmin,
            ManageClassesWindow parent) {
        super(app);
        this.isAdmin = isAdmin;
        this.parent = parent;
        initComponents();
        this.setModal(true);
        this.setTitle("Weather Viewer - Class Search");
        
        super.postInitialize(false);
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        bindingGroup = new org.jdesktop.beansbinding.BindingGroup();

        searchPanel = new javax.swing.JPanel();
        deptLabel = new javax.swing.JLabel();
        departmentTextField = new javax.swing.JTextField();
        classIDLabel = new javax.swing.JLabel();
        classIDTextField = new javax.swing.JTextField();
        sectionLabel = new javax.swing.JLabel();
        semesterLabel = new javax.swing.JLabel();
        yearLabel = new javax.swing.JLabel();
        instructorLabel = new javax.swing.JLabel();
        sectionTextField = new javax.swing.JTextField();
        yearTextField = new javax.swing.JTextField();
        instructorTextField = new javax.swing.JTextField();
        semesterComboBox = new javax.swing.JComboBox();
        searchLabel = new javax.swing.JLabel();
        cancelButton = new javax.swing.JButton();
        searchButton = new javax.swing.JButton();

        setTitle("Class Search Window");
        setResizable(false);

        searchPanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());

        deptLabel.setText("Department:");

        classIDLabel.setText("Class ID:");

        sectionLabel.setText("Section:");

        semesterLabel.setText("Semester:");

        yearLabel.setText("Year:");

        instructorLabel.setText("Instructor:");

        semesterComboBox.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Any", "Spring", "Summer", "Fall", "Winter" }));

        javax.swing.GroupLayout searchPanelLayout = new javax.swing.GroupLayout(searchPanel);
        searchPanel.setLayout(searchPanelLayout);
        searchPanelLayout.setHorizontalGroup(
            searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(searchPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(deptLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(classIDLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(sectionLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addComponent(semesterLabel)
                    .addComponent(yearLabel)
                    .addComponent(instructorLabel))
                .addGap(18, 18, 18)
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(departmentTextField)
                    .addComponent(classIDTextField)
                    .addComponent(sectionTextField)
                    .addComponent(semesterComboBox, 0, 173, Short.MAX_VALUE)
                    .addComponent(yearTextField)
                    .addComponent(instructorTextField))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        searchPanelLayout.setVerticalGroup(
            searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(searchPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(deptLabel)
                    .addComponent(departmentTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(classIDLabel)
                    .addComponent(classIDTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(sectionLabel)
                    .addComponent(sectionTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(semesterLabel)
                    .addComponent(semesterComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(yearLabel)
                    .addComponent(yearTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(searchPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(instructorLabel)
                    .addComponent(instructorTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        searchLabel.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        searchLabel.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        searchLabel.setText("Fill in any fields necessary, then click Search.");

        org.jdesktop.beansbinding.Binding binding = org.jdesktop.beansbinding.Bindings.createAutoBinding(org.jdesktop.beansbinding.AutoBinding.UpdateStrategy.READ_WRITE, searchButton, org.jdesktop.beansbinding.ELProperty.create("${selected}"), searchLabel, org.jdesktop.beansbinding.BeanProperty.create("requestFocusEnabled"));
        bindingGroup.addBinding(binding);

        cancelButton.setText("Cancel");
        cancelButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cancelButtonActionPerformed(evt);
            }
        });

        searchButton.setText("Search");
        searchButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                searchButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(searchLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(searchPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(searchButton)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(cancelButton)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(searchLabel)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(searchPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cancelButton)
                    .addComponent(searchButton))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        bindingGroup.bind();

        pack();
    }// </editor-fold>//GEN-END:initComponents

    /**
     * Is called when the search button is pressed.
     * Uses what the user entered to perform a search of the classes.
     * @param evt The even that called this method.
     */
    private void searchButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_searchButtonActionPerformed
        int section, year;
        if(sectionTextField.getText().equals("")) {
            section = 0;
        }
        else {
            section = Integer.parseInt(sectionTextField.getText());
        }
        if(yearTextField.getText().equals("")) {
            year = 0;
        }
        else {
            year = Integer.parseInt(yearTextField.getText());
        }
        
        //Clear screen for results.
        parent.setVisible(false);
        this.setVisible(false);
        
        new ManageClassesWindow(appControl, isAdmin,
                departmentTextField.getText(), classIDTextField.getText(),
                section, (String)semesterComboBox.getSelectedItem(),
                year, instructorTextField.getText());
       
        //Reset to parent.
        parent.setVisible(true);
        this.dispose();
    }//GEN-LAST:event_searchButtonActionPerformed

    /**
     * This is called when the user clicks the cancel button.
     * Disposes this window and brings back up the Manage Classes window.
     * @param evt The even that called this method.
     */
    private void cancelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cancelButtonActionPerformed
        this.dispose();
    }//GEN-LAST:event_cancelButtonActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton cancelButton;
    private javax.swing.JLabel classIDLabel;
    private javax.swing.JTextField classIDTextField;
    private javax.swing.JTextField departmentTextField;
    private javax.swing.JLabel deptLabel;
    private javax.swing.JLabel instructorLabel;
    private javax.swing.JTextField instructorTextField;
    private javax.swing.JButton searchButton;
    private javax.swing.JLabel searchLabel;
    private javax.swing.JPanel searchPanel;
    private javax.swing.JLabel sectionLabel;
    private javax.swing.JTextField sectionTextField;
    private javax.swing.JComboBox semesterComboBox;
    private javax.swing.JLabel semesterLabel;
    private javax.swing.JLabel yearLabel;
    private javax.swing.JTextField yearTextField;
    private org.jdesktop.beansbinding.BindingGroup bindingGroup;
    // End of variables declaration//GEN-END:variables
}
